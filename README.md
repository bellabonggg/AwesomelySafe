# Awesomely Safe



## Introduction

AwesomelySafe is a file transfer server and client designed to send a file over a TCP socket connection. 

## Technologies

Authentication is established using [RSA](http://en.wikipedia.org/wiki/RSA_%28cryptosystem%29) key-pair cryptography together with a [nonce](http://en.wikipedia.org/wiki/Cryptographic_nonce) to prevent playback attacks on the client. Following authentication, a file can be encrypted using a either symmetric [AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard) key, or the same RSA key pair, before it is sent and decrypted by the server.

Also, the open source [AwesomeSockets](https://github.com/skewedlines/AwesomeSockets) library is used to facility easy sending of bytes through the TCP sockets.

## Instructions

The `AwesomeFileTransferServer` and `AwesomeFileTransferClient` files are located in `/SecuritiesProjectWorkspace/src/main`.

### Initialisation

The `AwesomeFileTransferServer` can be initialised through the following syntax, and it will block as it waits for a client to connect.

```java
int PORT = 5432;
String DESTINATION_FILE_PATH = "src/received_file";
int ENCRYPTION_METHOD = 1;

AwesomeFileTransferServer server = new AwesomeFileTransferServer(PORT, DESTINATION_FILE_PATH, ENCRYPTION_METHOD);
server.start();
```

Similarly, the `AwesomeFileTransferClient` is initialised here, and calling `client.start()` will start the authentication of the server and file transfer.

```java
int PORT = 5432;
String SERVER_IP = "127.0.0.1";
String SOURCE_FILE_PATH = "src/source_file";
int ENCRYPTION_METHOD = 1;

AwesomeFileTransferClient client = new AwesomeFileTransferClient(PORT, SERVER_IP, SOURCE_FILE_PATH, ENCRYPTION_METHOD);
client.start();
```

Note that `ENCRYPTION_METHOD` is an integer that takes a value of `1` or `2` corresponding to [CP-1](#cp-1) and [CP-2](#cp-2)

## Tests

Test cases are built upon the [JUnit](http://junit.org) testing framework, and are located `/SecuritiesProjectWorkspace/src/tests/`, in the file `TestOfAwesomeness.java`.

Tests include encryption and decryption of files, as well as sending a large image through the file transfer server and client.

## Specifications

The file transfer starts with authentication, before the using the confidentiality protocol the server and client have been configured with.

### Authentication Protocol

![AP Specification](https://raw.githubusercontent.com/skewedlines/AwesomelySafe/master/Specifications/AP.png)

Even though the subsequent confidentiality protocols keep the files sent private to only the server and client, an intruder could still store and playback the server's certificate, and falsely authenticate as the correct server. Hence, a nonce is attached to all the messages sent from the client during the handshake, and the server is expected to reply with the same nonce only once.

### Confidentiality Protocol 1

![CP-1 Specification](https://raw.githubusercontent.com/skewedlines/AwesomelySafe/master/Specifications/CP1.png)

RSA crpytography is employed to encrypt and send a file over the network.

### Confidentiality Protocol 2

![CP-2 Specification](https://raw.githubusercontent.com/skewedlines/AwesomelySafe/master/Specifications/cp2.png)

A symmetric AES key is generated by the client, and used to encrypt and send a file over the network.

## Performance

![Performance Benchmark](https://raw.githubusercontent.com/skewedlines/AwesomelySafe/master/Specifications/Benchmark.png)

RSA cryptography is computationally intensive, and this effect is further amplified by the need to split files into blocks of 117 bytes. Hence, the AES encryption and decryption of the file in CP-2 performs better than CP-1.



